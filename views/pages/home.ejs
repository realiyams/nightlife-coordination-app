<!-- views/pages/home.ejs -->
<h1>Welcome to Nightlife Coordination App</h1>
<p>Explore the best nightlife spots and plan your night with friends!</p>

<form id="searchForm">
  <label for="city">Enter City:</label>
  <input type="text" id="city" name="city" required>
  <button type="submit">Search Bars</button>
</form>

<div id="barsList"></div>

<script>
  document.getElementById('searchForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const city = document.getElementById('city').value;
    const barsList = document.getElementById('barsList');
    barsList.innerHTML = "<p>Loading bars...</p>"; // Display loading message
    try {
      const response = await fetch(`/places/search?city=${city}`);
      const bars = await response.json();
      console.log(bars);
      if (bars.length > 0) {
        barsList.innerHTML = bars.map(bar => `
          <div>
            <h3>${bar.properties.name || 'Unknown Bar'}</h3>
            <p>${bar.properties.address_line1 || ''}, ${bar.properties.city || ''}</p>
          </div>
        `).join('');
      } else {
        barsList.innerHTML = "<p>No bars or pubs found for this city.</p>";
      }
    } catch (error) {
      console.error("Error fetching bars:", error);
      barsList.innerHTML = "<p>Failed to load bars. Try again.</p>";
    }
  });
</script>
